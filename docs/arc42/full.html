<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.18">
<title>Architecture documentation (arc42)</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.square{list-style-type:square}
ul.circle ul:not([class]),ul.disc ul:not([class]),ul.square ul:not([class]){list-style:inherit}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>Architecture documentation (arc42)</h1>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_introduction_and_goals">Introduction and goals</a>
<ul class="sectlevel2">
<li><a href="#_requirements_overview">Requirements overview</a></li>
<li><a href="#_quality_goals">Quality goals</a></li>
</ul>
</li>
<li><a href="#_architecture_constraints">Architecture constraints</a>
<ul class="sectlevel2">
<li><a href="#_technical_constraints">Technical Constraints</a></li>
<li><a href="#_organizational_constraints">Organizational Constraints</a></li>
<li><a href="#_political_constraints">Political constraints</a></li>
<li><a href="#_development_conventions">Development conventions</a></li>
</ul>
</li>
<li><a href="#_system_scope_and_context">System scope and context</a>
<ul class="sectlevel2">
<li><a href="#_business_context">Business context</a></li>
<li><a href="#_technical_context">Technical context</a></li>
</ul>
</li>
<li><a href="#_solution_strategy">Solution strategy</a>
<ul class="sectlevel2">
<li><a href="#_introduction">Introduction</a></li>
<li><a href="#_technology">Technology</a></li>
<li><a href="#_structure">Structure</a></li>
</ul>
</li>
<li><a href="#_building_block_view">Building block view</a>
<ul class="sectlevel2">
<li><a href="#_whitebox_overall_system">Whitebox overall system</a></li>
<li><a href="#_level_1">Level 1</a></li>
<li><a href="#_level_2">Level 2</a></li>
<li><a href="#_irs_api_2">IRS API</a></li>
</ul>
</li>
<li><a href="#_runtime_view">Runtime view</a>
<ul class="sectlevel2">
<li><a href="#_irs_iterative">IRS Iterative</a></li>
<li><a href="#_scenario_1_create_job">Scenario 1: Create job</a></li>
<li><a href="#_scenario_2_job_execution">Scenario 2: Job execution</a></li>
<li><a href="#_scenario_3_request_for_jobresponse">Scenario 3: Request for JobResponse</a></li>
<li><a href="#_scenario_4_cancel_job_execution">Scenario 4: Cancel job execution</a></li>
<li><a href="#_irs_recursive">IRS Recursive</a></li>
<li><a href="#_use_case_ess_environmental_and_social_standards_top_down_approach">Use Case: ESS (Environmental and Social Standards) Top-Down Approach</a></li>
<li><a href="#_scenario_1_register_an_ess_investigation_order">Scenario 1: Register an Ess-Investigation-Order</a></li>
<li><a href="#_scenario_2_register_an_ess_investigation_job">Scenario 2: Register an Ess-Investigation-Job</a></li>
</ul>
</li>
<li><a href="#_deployment_view">Deployment view</a>
<ul class="sectlevel2">
<li><a href="#_operator">Operator</a></li>
<li><a href="#_argocd">ArgoCD</a></li>
<li><a href="#_vault">Vault</a></li>
<li><a href="#_github">GitHub</a></li>
<li><a href="#_docker_hub">Docker Hub</a></li>
<li><a href="#_kubernetes">Kubernetes</a></li>
<li><a href="#_local_deployment">Local deployment</a></li>
<li><a href="#_view_levels">View Levels</a></li>
</ul>
</li>
<li><a href="#_cross_cutting_concepts">Cross-cutting concepts</a>
<ul class="sectlevel2">
<li><a href="#_domain_concepts">Domain concepts</a></li>
<li><a href="#_safety_and_security_concepts">Safety and security concepts</a></li>
<li><a href="#_architecture_and_design_patterns">Architecture and design patterns</a></li>
<li><a href="#_under_the_hood_concepts">"Under-the-hood" concepts</a></li>
<li><a href="#_development_concepts">Development concepts</a></li>
<li><a href="#_operational_concepts">Operational concepts</a></li>
</ul>
</li>
<li><a href="#_quality_requirements">Quality requirements</a>
<ul class="sectlevel2">
<li><a href="#_quality_scenarios">Quality Scenarios</a></li>
</ul>
</li>
<li><a href="#_glossary">Glossary</a></li>
<li><a href="#_notice">NOTICE</a></li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_introduction_and_goals">Introduction and goals</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This chapter gives you an overview about the goals of the service,
in which context the service runs and which stakeholders are involved.</p>
</div>
<div class="sect2">
<h3 id="_requirements_overview">Requirements overview</h3>
<div class="sect3">
<h4 id="_what_is_the_item_relationship_service">What is the Item Relationship Service?</h4>
<div class="paragraph">
<p>The IRS is a:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Functional federated component</p>
</li>
<li>
<p>API endpoint to retrieve the tree structures in a recursive way, which data assets are distributed throughout the Catena-X network</p>
</li>
<li>
<p>Reference implementation</p>
</li>
<li>
<p>Data chain provider</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_substantial_features">Substantial Features</h4>
<div class="ulist">
<ul>
<li>
<p>provide a top-down BoM asBuilt tree structure along the submodel <a href="https://github.com/eclipse-tractusx/sldt-semantic-models/tree/main/io.catenax.single_level_bom_as_built">"SingleLevelBomAsBuilt"</a></p>
</li>
<li>
<p>usage of EDC consumer for communicating with the Catena-X network</p>
</li>
<li>
<p>functionality of IRS provider will be handled by providers submodel servers</p>
</li>
<li>
<p>federated IRS service</p>
</li>
<li>
<p>'asBuild' BoM of serialized components</p>
</li>
<li>
<p>provides endpoints for submodel-descriptors</p>
</li>
<li>
<p>start recursive Environmental and Social Standard investigations throughout the network based on the "asPlanned" lifecycle</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_quality_goals">Quality goals</h3>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
The following table entries define overall IRS quality goals. The order of the topics do not resolve in a priority of the quality goals.
</td>
</tr>
</table>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Quality goal</th>
<th class="tableblock halign-left valign-top">Motivation and description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">running reference application</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The IRS is built to traverse a distributed data chain across the automotive Industry. The goal for the IRS release 1 scope is to build a running solution to test the functionality of building a BoM as built of serialized components.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">multiple async job orchestration</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The IRS is built to access multiple endpoints parallel. Since the for the Endpoint it is not clear yet how long a request will take to respond. The Service is built to handle multiple asynchronous requests.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">cloud agnostic solution</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The IRS is built as reference architecture and able to run on different cloud solutions. It uses helm charts, terraform and a abstracts the storage, so that it can easily be integrated on different systems.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">base security measures</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The IRS is built with a base set of security features.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">application reliability</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The IRS architecture is set up so that the costumers can rely on reliable data chains</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_architecture_constraints">Architecture constraints</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_technical_constraints">Technical Constraints</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cloud Agnostic Architecture approach</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IRS provides a reference application/implementation which is deployable on any cloud ecosystem. There is no vendor lock to any cloud vendor.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Spring Boot and the Spring Framework are used as the underlying framework for Java development.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Spring Boot and the Spring Framework are used to create a simple, production-grade based application that can be deployed without any additional infrastructure components.</p>
<p class="tableblock">Orchestration of application components and integration with other libraries/frameworks.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Lombok</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Lombok for boilerplate code generation. Keeping code concise improves quality and maintainability.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Kubernetes is used for container orchestration</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Kubernetes as container orchestration system used for software deployment, scaling and management of the IRS application.  This supports our software infrastructure and ensures efficient management and scalability of the IRS reference application.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Docker containers are used to provide a microservice oriented architecture</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Deployments are made on reliable production-ready images. Avoiding repetitive, mundane configuration tasks for container orchestration.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Docker Compose is used to define and tune multi-container-applications based on Docker container technologies.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Docker containers to develop independently of the underlying OS.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_organizational_constraints">Organizational Constraints</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Comment</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">CX-Services</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Provide IRS as a C-X Shared Data Service.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">App Marketplace &amp; API Connection</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The IRS Application must be available to the user in the App Marketplace.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">App Marketplace &amp; API Connection</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Federal Ministry for Economic Affairs and Energy (BMWi) promotion</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The Federal Ministry for Economic Affairs and Energy (BMWi) promotes the project and provides funds for the project.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Technology Readiness Level (TRL) for products developed within the CX consortia</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">As IRS is a reference implementation, the Technology Readiness Level (TRL) must not be above TRL 8.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Operational Readiness for Release 1 has to be fulfilled</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The minimum requirements for release 1 has to be archived. Later on, the Operational Readiness for Release has to be fulfilled according to the requirements of the C-X consortia.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_political_constraints">Political constraints</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Open Source</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">FOSS licenses approved by the Eclipse Foundation must be used. This could represent the initial set that the CX community agrees on to regulate the content contribution under FOSS licenses.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Apache License 2.0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Apache License 2.0 is one of the approved licenses that should be used to respect and guarantee Intellectual Property (IP).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Java OpenJDK Version JDK &gt;= 17</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IRS provides an open source application standard. It uses OpenJDK, which is licensed under the GNU General Public License (GNU GPL) version 2.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_development_conventions">Development conventions</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Architecture documentation</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Architectural documentation of the IRS reference application/implementation following the ARC42 template.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Coding guidelines</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">We follow the Google Java Style Guide. This is ensured by using the unified code formatter in the team and enforcing the style via Maven and Checkstyle / PMD.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Executable Bundle provided via the App Marketplace</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Since IRS is available in the App Marketplace, the application should be provided in one executable bundle.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Module structure</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The entire build is driven by a Maven file, which runs itself from a single Dockerfile.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Code Analysis, Linting and Code Coverage</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A consistent style increases the readability and maintainability of the code base. Hence, we use analyzers to enforce consistency and style rules. We enforce the code style and rules in the CI to avoid merging non-compliant code.</p></td>
</tr>
</tbody>
</table>
<div class="sect3">
<h4 id="_code_analysis_linting_and_code_coverage">Code analysis, linting and code coverage</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Tool</th>
<th class="tableblock halign-left valign-top">Scope</th>
<th class="tableblock halign-left valign-top">Rule</th>
<th class="tableblock halign-left valign-top">Configuration (via files / annotations)</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tidy</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enforce Maven POM code convention</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Fail build on untidy pom.xml</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">N/A</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">FindSecBugs</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SpotBugs plugin to add security bug coverage</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Fail build on violations</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">N/A</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Checkstyle</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enforce coding standards</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Fail build on violations</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">.config/checkstyle-suppressions.xml
@SuppressWarnings("checkstyle:XXX")</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PMD</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Source code analyzer to find common programming flaws</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Fail build on violations</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">.config/pmd-rules.xml
@SuppressWarnings("PMD.XXX")</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">JaCoCo</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Test coverage</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Fail build on coverage &lt; 80%</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">pom.xml
@ExcludeFromCodeCoverageGeneratedReport</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Dependabot</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Automated dependency updates built into GitHub. Provides pull requests for dependency updates.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Every dependency update automatically generates a pull request.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">.github/dependabot.yml</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">CodeQl</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Discover vulnerabilities across a code base.</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">.github/workflows/codeql.yml</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">KICS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Infrastructure as Code scannings.</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">.github/workflows/kics.yml</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_system_scope_and_context">System scope and context</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The IRS acts as a middleware between consumers and manufacturers. This section describes the environment of IRS. Who are its users, and with which other systems does it interact with.</p>
</div>
<div class="sect2">
<h3 id="_business_context">Business context</h3>
<div class="imageblock">
<div class="content">
<img src="architecture-constraints/business-context.svg" alt="business context" width="273" height="327">
</div>
</div>
<div class="sect3">
<h4 id="_consumer">Consumer</h4>
<div class="paragraph">
<p>The IRS API is being consumed by the dismantler dashboard and other parties which are part of the Catena-X network. They need to provide valid credentials issued by the Catena-X IAM. Additionally, they must provide a base global asset identifier to retrieve information for as well as configuration details for the view on that information.</p>
</div>
</div>
<div class="sect3">
<h4 id="_catena_x_network">Catena-X network</h4>
<div class="paragraph">
<p>The IRS retrieves data from the Catena-X network (using the necessary infrastructure, see Technical Context), aggregates it and provides it back to the consumers. This connection is mandatory. If the Catena-X services are unavailable, the IRS cannot perform any work.</p>
</div>
<div class="paragraph">
<p>As of now, the IRS uses its own IAM credentials to gather the required data. This might be changed to use the consumer credentials in the future.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_technical_context">Technical context</h3>
<div class="imageblock">
<div class="content">
<img src="architecture-constraints/integrated-overview.svg" alt="integrated overview" width="1241" height="452">
</div>
</div>
<div class="sect3">
<h4 id="_component_overview">Component overview</h4>
<div class="sect4">
<h5 id="_irs_api">IRS-API</h5>
<div class="paragraph">
<p>We provide a REST API that can be consumed by any system registered in the Catena-X OAuth2 protocol provider, e.g. the Dismantler Dashboard. The development of such a consumer service is not part of the IRS application. Each system that acts as a client to the Restful application IRS can be used instead, if it supports any REST call of the designed REST endpoints in the REST Controller of the IRS application. For communication, the transport protocol HTTP(S) should be established.</p>
</div>
<div class="paragraph">
<p>In order to consume the Restful application IRS, the security aspect should be taken in consideration. IRS is a Spring Boot based application and is secured with the OpenID connector provider with OAuth2 protocol. This means for the consumers (users) that they need to authenticate themselves in order to be authorized to get access to the IRS. They generate a bearer token that they get from OAuth2 provider and attach it to the HTTP header parameter Authorization.</p>
</div>
</div>
<div class="sect4">
<h5 id="_registry_api">Registry API</h5>
<div class="paragraph">
<p>The IRS acts as a consumer of the component Asset Administration Shell Registry. The IRS contains a Restful client (REST template) that build a REST call to the mentioned Digital Twin Registry API based on its known URL (the AAS registry URL is configured in the IRS Restful API). The request contains the given "globalAssetId" by the consumer. Like described in the above section, the security aspect is required in order to achieve a REST call against the AAS Registry. As a response, the IRS gets the corresponding asset administration shell descriptor. The last one contains a list of submodel descriptors which can be filtered by the aspect type entered by the consumer. An aspect type like <a href="https://github.com/eclipse-tractusx/sldt-semantic-models/tree/main/io.catenax.single_level_bom_as_built">SingleLevelBomAsBuilt</a>, <a href="https://github.com/eclipse-tractusx/sldt-semantic-models/tree/main/io.catenax.serial_part">SerialPart</a> etc. And as mentioned above, the transport protocol HTTP(S) is used for the REST call communication.</p>
</div>
<div class="sect5">
<h6 id="_discovery_service">Discovery Service</h6>
<div class="paragraph">
<p>In a decentralized system, the digital twin registry is moved behind an EDC. To access the registry of a data provider, a new set of central services was introduces. These discovery services consist of BPN Discovery, Discovery Finder and EDC Discovery.
IRS uses the Discovery Finder and EDC Discovery.
Discovery Finder is used to find the correct EDC Discovery URL for the type BPN. EDC Discovery returns the EDC connector URLs for a specific BPN.
With these EDC connector URLs, IRS searches the provider catalog for a asset of type <code>data.core.digitalTwinRegistry</code>. This asset should be part of every provider EDC catalog. With this asset, IRS can access the decentralized registry and after this step, the flow stays the same as in the paragraph above.</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_edc_api">EDC API</h5>
<div class="paragraph">
<p>The integrated EDC client in the IRS is responsible for creating restful requests to the component EDC. The IRS application builds from the retrieved AAS Descriptor (see previous section) the corresponding submodel endpoint URLs, negotiates an EDC contract and sends via the submodel REST client requests to the EDC. The EDC responds with the corresponding submodel data.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_semantic_models">Semantic Models</h4>
<div class="sect4">
<h5 id="_overview_asbuilt">Overview asBuilt</h5>
<div class="sect5">
<h6 id="_traversal_aspect">Traversal Aspect</h6>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Description</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SingleLevelBomAsBuilt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The single-level bill of material represents one sub-level of an assembly and does not include any lower-level subassemblies. The as-built lifecycle references all child items as manufactured by the manufacturer referencing only child items in an as-built lifecycle themselves, unless parts can only be tracked by an part ID. If it&#8217;s unclear which item has been built-in into the parent item, all potential parts must be listed. This is the case when, e.g. the same item is supplied by two suppliers and the item is only tracked by a customer part ID during assembly, these items can not be differentiated from each other.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[2.0.0, 3.0.0]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SingleLevelUsageAsBuilt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The aspect provides the information in which parent part(s)/product(s) the given item is assembled in. Could be a 1:1 relationship in terms of a e.g. a brake component or 1:n for e.g. coatings. The given item as well as the parent item must refer to an object from as-built lifecycle phase, i.e. a batch or a serialized part.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3.0.0</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect5">
<h6 id="_semantic_model">Semantic Model</h6>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Description</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Version range</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SerialPart</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A serialized part is an instantiation of a (design-) part, where the particular instantiation can be uniquely identified by means of a serial numbers or a similar identifier (e.g. VAN) or a combination of multiple identifiers (e.g. combination of manufacturer, date and number)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[1.0,0, 1.1.0]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Batch</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A batch is a quantity of (semi-) finished products or (raw) material product that have been produced under the same circumstances (e.g. same production location), as specified groups or amounts, within a certain time frame. Every batch can differ in the number or amount of products. Different batches can have varied specifications, e.g., different colors. A batch is identified via a Batch ID.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[1.0.0, 2.0.0]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">JustInSequencePart</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A just-in-sequence part is an instantiation of a (design-) part, where the particular instantiation can be uniquely identified by means of a combination of several IDs related to a just-in-sequence process</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.0.0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">TractionBatteryCode</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The traction battery code is an identification code for any automotive traction battery, ultracapacitor and other reachargeble energy storage device. It allows to carry information as required by the National Standard of the People&#8217;s Republic of China according to GB/T 34014-2017 published by the Standardization Administration of China (SAC).</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.0.0</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect4">
<h5 id="_overview_asplanned">Overview asPlanned</h5>
<div class="sect5">
<h6 id="_traversal_aspect_2">Traversal Aspect</h6>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Description</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SingleLevelBomAsPlanned</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The single-level Bill of Material represents one sub-level of an assembly and does not include any lower-level subassemblies. In as planned lifecycle state all variants are covered (\"120% BoM\"). If multiple versions of child parts exist that can be assembled into the same parent part, all versions of the child part are included in the BoM. If there are multiple suppliers for the same child part, each supplier has an entry for their child part in the BoM.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[2.0.0, 3.0.0]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SingleLevelUsageAsPlanned</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The aspect provides the information in which parent part(s)/product(s) the given item is assembled in. This could be a 1:1 relationship in terms of a e.g. a brake component or 1:n for e.g. coatings. The given item as well as the parent item must refer to an object from as planned lifecycle phase. If multiple versions of parent parts exist that the child part can be assembled into, all versions of the parent part are included in the usage list.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.0.0</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect5">
<h6 id="_semantic_model_2">Semantic Model</h6>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Description</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PartAsPlanned</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A Part as Planned represents an item in the Catena-X Bill of Material (BOM) in As-Planned lifecycle status in a specific version.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[1.0.0, 1.0.1]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PartSiteInformationAsPlanned</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The aspect provides site related information for a given as planned item (i.e. a part type or part instance that is uniquely identifiable within Catena-X via its Catena-X ID). A site is a delimited geographical area where a legal entity does business. In the \"as planned\" lifecycle context all potentially related sites are listed including all sites where e.g. production of this part (type) is planned.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.0.0</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect4">
<h5 id="_overview_asspecified">Overview asSpecified</h5>
<div class="sect5">
<h6 id="_traversal_aspect_3">Traversal Aspect</h6>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Description</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SingleLevelBomAsSpecified</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The SingleLevelBomAsSpecified defines the view of the OEM or producer of the whole product, e.g. the OEM of a vehicle. It is free of any supplier-related information and specifies the promised and guaranteed content of the whole product to the end customer. This top-down view is in contrast to the bottom-up view of the SingleLevelBoMAsPlanned, though several sub-aspects are shared. The BomAsSpecified is merely one aspect, which is attached to the twin of the whole product and itself does neither introduce further twins nor reference them. Instead it merely comprises all functional information required by dismantlers, workshops or requestors for used parts to search for and to make a match on the marketplace.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.0.0</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect5">
<h6 id="_semantic_model_3">Semantic Model</h6>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Description</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PartAsSpecified</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The aspect model PartAsSpecified belongs to the Part Catalogue. A PartAsSpecified represents a certain OEM catalog part on part number level. Providing a digital representation of the part as specified by the OEM. The link to the serialized part is done via the partId, this can only be done if the respective DT was provided by the supplier within the value chain.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[1.0.0, 1.0.1, 2.0.0]</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_solution_strategy">Solution strategy</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_introduction">Introduction</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Quality goal</th>
<th class="tableblock halign-left valign-top">Matching approaches in the solution</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">application reliability</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>only data source is the Catena-X network, data is fetched directly from the data owner</p>
</li>
<li>
<p>IRS can be hosted decentralized by every participant by being an open source reference implementation</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">base security measures</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>API protection using OAuth2.0/OIDC</p>
</li>
<li>
<p>automatic static and dynamic code analysis tools as part of the pipeline</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">cloud agnostic solution</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>IRS is provided as a Docker image</p>
</li>
<li>
<p>Helm charts assist in deploying the application in any Kubernetes environment</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">multiple async job orchestration</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>Separate job executor decouples data requests from the job status API</p>
</li>
<li>
<p>Multiple jobs with multiple transfer requests each can be handled in parallel, depending on the deployment resources</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">running reference application</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>Working application can be used as reference by anyone due to open source publishing</p>
</li>
</ul>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_technology">Technology</h3>
<div class="paragraph">
<p>The IRS is developed using Java and the Spring Boot framework. This choice was made due to the technical knowledge of the team and the widespread support of the framework.</p>
</div>
<div class="paragraph">
<p>Hosting the application is done using Docker and Kubernetes, which is widely used and vendor-independent regarding the hosting provider (e.g. AWS, Google Cloud, Azure, &#8230;&#8203;).</p>
</div>
<div class="paragraph">
<p>Inter-service communication is done using HTTP REST. This is the standard method in the Catena-X landscape and makes the IRS API easy to use for any third party client.</p>
</div>
<div class="paragraph">
<p>For persistence, blob storage was chosen as the payloads retrieved for each job vary for every aspect and the format can be unknown to the application, as it&#8217;s just being tunneled through to the client.</p>
</div>
</div>
<div class="sect2">
<h3 id="_structure">Structure</h3>
<div class="paragraph">
<p>The IRS consists of 4 main components:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>the REST API to view and control jobs</p>
</li>
<li>
<p>the asynchronous job processing engine</p>
</li>
<li>
<p>the job and payload persistence</p>
</li>
<li>
<p>the AAS connector</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The REST API classes are separated from the application logic and can be replaced by a different interface easily. The actual entrypoint into the application logic are the *Service classes.</p>
</div>
<div class="paragraph">
<p>The job processing engine handles execution of the data requests for each job. It uses the AAS connector to retrieve the data and stores it into the persistence. The actual implementation of the persistence is decoupled from the logical representation and can be replaced easily as well.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_building_block_view">Building block view</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_whitebox_overall_system">Whitebox overall system</h3>
<div class="paragraph">
<p>The interfaces show how the components interact with each other and which interfaces the IRS is providing.</p>
</div>
<div class="sect3">
<h4 id="_component_diagram">Component diagram</h4>
<div class="imageblock">
<div class="content">
<img src="architecture-constraints/whitebox_overall_decentral.svg" alt="whitebox overall decentral" width="2773" height="871">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_component_description">Component description</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Components</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">IRSApiConsumer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Proxy for any consumer of the IRS api.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">IRS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The IRS consumes relationship information across the CX-network and builds the graph view. Within this documentation, the focus lies on the IRS</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Policy Store</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The Policy Store component stores usage policies used to validate the consumption of data asset.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">EDC Consumer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The EDC Consumer component is there to fulfill the GAIA-X and IDSA-data sovereignty principles. The EDC Consumer consists of a control plane and a data plane.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">EDC Provider</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The EDC Provider Component connects with EDC Consumer component and forms the end point for the actual exchange of data. It handles automatic contract negotiation and the subsequent exchange of data assets for connected applications.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Submodel Server</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The Submodel Server offers endpoints for requesting the Submodel aspects.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MIW</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Managed Identity Wallet as Self-Sovereign-Identity Provider for EDC</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Discovery Finder</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The Discovery Finder is used to get the EDC Discovery Endpoint for a certain type of identification, e.g. BPNL.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">EDC Discovery</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The EDC Discovery Service is used to get EDC endpoints for a certain BPNL.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Semantic Hub</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Semantic Hub provides information about semantic models in a specific version. This also includes JSON schemas, which IRS uses to validate the payload received by data providers.</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Number</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">01</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IrsApiConsumer calls the <strong>IRS</strong> public /irs <strong>API</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">02</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IrsApiConsumer must authorize using <strong>technical C-X User</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">03</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Delegate authorization request to <strong>IdP</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">04</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IRS requesting for <strong>SubmodelAspects</strong> using <strong>EDC</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">05</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IRS requesting the <strong>decentral DigitalTwinRegistry</strong> over <strong>EDC</strong> and service discovery flow</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">06</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IRS uses EDC to ensure sovereign data consumption</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">07</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IRS MUST authorize at central IAM</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">08</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IRS lookup for EDC Provider by given BPNs over the <strong>EDC Discovery Service</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">09</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IRS lookup for <strong>EDC Discovery Services</strong> by given type &lt;BPN&gt; over the <strong>Discovery Finder</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">10</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IRS uses <strong>Semantic Hub</strong> to validate of <strong>SubmodelAspects</strong> payloads agains the schema provided in <strong>Semantic Hub</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">11</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>EDC</strong> is connected to <strong>Managed Identity Wallet</strong> for access policy check for data offers</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">12</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>EDC</strong> communication covering negotiation and data consumption</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">13</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>EDC</strong> is connected to <strong>Managed Identity Wallet</strong> for access policy check for data offers</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">14</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>IRS</strong> accessing to <strong>SubmodelServer</strong> on Tier Level using the <strong>EDC</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">15</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>IRS</strong> accessing the <strong>decentral DigitalTwinRegistry</strong> on Tier Level using the <strong>EDC</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">16</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">In case of the use-case Environmental and Social Standards, <strong>IRS</strong> sends notifications to the <strong>IRS-ESS</strong> instance running at the data provider using the <strong>EDC</strong>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">17</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>IRS</strong> uses the Policy Store to load the usage policies stored for BPNLs in order to check the usage policies during the consumption of the data assets.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">18</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IrsApiConsumer calls the IRS public /policy <strong>API</strong></p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_level_1">Level 1</h3>
<div class="sect3">
<h4 id="_component_diagram_2">Component diagram</h4>
<div class="imageblock">
<div class="content">
<img src="architecture-constraints/level-1.svg" alt="level 1" width="840" height="1031">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_component_description_2">Component description</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Components</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>IRS</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The IRS builds a digital representation of a product (digital twin) and the relationships of items the product consists of in a hierarchical structure.</p>
<p class="tableblock">The result is an item graph in which each node represents a digital item of the product - this graph is called "Item Graph".</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>IRS API</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The <strong>IRS API</strong> is the Interface over which the Data Consumer is communicating.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>IrsController</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The <strong>IrsController</strong> provides a REST Interface for retrieving IRS processed data and job details of the current item graph retrieval process.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>IrsItemGraphQueryService</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The <strong>IrsItemGraphQueryService</strong> implements the REST Interface of the IrsController.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>JobOrchestrator</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The <strong>JobOrchestrator</strong> is a component which manages (start, end, cancel, resume) the jobs which execute the item graph retrieval process.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>RecursiveJobHandler</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The <strong>RecursiveJobHandler</strong> handles the job execution recursively until a given abort criteria is reached or the complete item graph is build.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>TransferProcessManager</strong></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The TransferProcessManager handles the outgoing requests to the various data services.
A job is processed in this order:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Initiation of the job and preparation of the stream of <strong>DataRequests</strong></p>
</li>
<li>
<p><strong>RecursiveJobHandler</strong> requesting for AAS via the Digital Twin registry.</p>
</li>
<li>
<p>Analyzing the structure of the AAS response by collecting the traversal aspect.</p>
</li>
<li>
<p>Requesting submodel data for given items of next level.</p>
</li>
<li>
<p>Recursively iteration over step 2-4 until an abort criterion is reached.</p>
</li>
<li>
<p>Assembles the complete item graph.</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>BlobStore</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The BlobStore is the database where the relationships and tombstones are stored for a requested item.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>JobStore</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The JobStore is the database where the jobs with the information about the requested item are stored.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Digital Twin Client</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The Digital Twin Client is the interface to the Digital Twin Registry. It provides an interface for the Asset Administration Shells.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Decentralized Digital Twin Client</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">In a decentralized network, the Digital Twin Client connects to the EDC which then proxies the requests to the digital twin registry on provider side.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>EDC Client</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The EDC Client is used to communicate with the EDC network, negotiate contracts and retrieve submodel data.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>EssController</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The <strong>EssController</strong> provides a REST Interface to perform BPN investigations of supply chain.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>PolicyStoreController</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The <strong>PolicyStoreController</strong> provides a REST Interface for getting, adding and deleting accepted IRS EDC policies. These policies will be used to validate usage policies of EDC contract offers.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_level_2">Level 2</h3>
<div class="sect3">
<h4 id="_irs_controller">IRS controller</h4>
<div class="paragraph">
<p>The IRS REST controller is used to provide a RESTful web service.</p>
</div>
<div class="sect4">
<h5 id="_component_diagram_3">Component diagram</h5>
<div class="imageblock">
<div class="content">
<img src="architecture-constraints/level-2-controller.svg" alt="level 2 controller" width="659" height="568">
</div>
</div>
</div>
<div class="sect4">
<h5 id="_component_description_3">Component description</h5>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Components</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">IrsController</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Application REST controller.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">IrsItemGraphQueryService</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Service for retrieving item graph.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">JobOrchestrator</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Orchestrator service for recursive MultiTransferJobs that potentially comprise multiple transfers.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">JobStore</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Spring configuration for job-related beans.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">BlobstorePersistence</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Interface for storing data blobs.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Policy Store</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The <strong>Policy Store</strong> provides a REST Interface for getting, adding and deleting accepted IRS EDC policies. These policies will be used to validate usage policies of EDC contract offers.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_recursivejobhandler">RecursiveJobHandler</h4>
<div class="paragraph">
<p>The <strong>RecursiveJobHandler</strong> component provide the logic to build jobs recursively to retrieve items over the complete C-X network and assembles the partial results into a single item graph result.</p>
</div>
<div class="sect4">
<h5 id="_component_diagram_4">Component diagram</h5>
<div class="imageblock">
<div class="content">
<img src="architecture-constraints/level-2-jobhandler.svg" alt="level 2 jobhandler" width="752" height="280">
</div>
</div>
</div>
<div class="sect4">
<h5 id="_component_description_4">Component description</h5>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Components</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">AASRecursiveJobHandler</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Recursive job handler for AAS data</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">TreeRecursiveLogic</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Retrieves item graphs from potentially multiple calls to IRS API behind multiple EDC Providers, and assembles their outputs into one overall item graph.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ItemTreesAssembler</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Assembles multiple partial item graphs into one overall item graph.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">BlobPersistence</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Interface for storing data blobs.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_transferprocessmanagement">TransferProcessManagement</h4>
<div class="paragraph">
<p>The TransferProcessManager creates executions and provides them to the executor service. Each execution contains HTTP requests to the asset administration shell registry and to the submodel interface.</p>
</div>
<div class="sect4">
<h5 id="_component_diagram_5">Component diagram</h5>
<div class="imageblock">
<div class="content">
<img src="architecture-constraints/level-2-transfer-process-management.svg" alt="level 2 transfer process management" width="1506" height="1017">
</div>
</div>
</div>
<div class="sect4">
<h5 id="_component_description_5">Component description</h5>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Components</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">TransferProcessManager</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The TransferProcessManager manages the requests to the EDC and DigitalTwinRegistry.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DigitalTwinRegistryFacade</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The DigitalTwinRegistryFacade calls the DigitalTwinRegistry to retrieve data form the AAS registry and transforms the response to internal data models.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SubmodelFacade</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The SubmodelFacade handles EDC contract negotiations and is responsible for the EDC dataplane requests to retrieve data from the submodel servers.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">BlobStore</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The BlobStore is the database where the relationships and tombstones are stored for a requested item.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DigitalTwinRegistry</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The DigitalTwinRegistry is the central database of registered assets. In a decentralized network, the registry is no longer central, but every provider has its own registry.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ExecutorService</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The ExecutorService enables the simultaneous execution of requests of transfer processes.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_aastransferprocessmanager">AASTransferProcessManager</h4>
<div class="paragraph">
<p>The AASTransferProcessManager coordinates creation of Runnables which are then passed to the ExecutorService for asynchronous and parallel execution.
The Runnable consists of different Delegates which are each responsible for requesting certain types of data.</p>
</div>
<div class="sect4">
<h5 id="_component_diagram_6">Component diagram</h5>
<div class="imageblock">
<div class="content">
<img src="architecture-constraints/level-2-int-transfer-process-delegate.svg" alt="level 2 int transfer process delegate" width="743" height="615">
</div>
</div>
</div>
<div class="sect4">
<h5 id="_component_description_6">Component description</h5>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Components</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Description</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DigitalTwinDelegate</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Request the digital twin for the globalAssetId. The result is stored in "shells" of the job response.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">RelationshipDelegate</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Request the payload for relationship aspects, found in the DTR. Relationships are mapped to the internal linkedItem data structure of IRS and validated to be within the supported major Traversal Aspect version range which can be found in the technical context.
The result is stored in "relationships" of the job response.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SubmodelDelegate</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Request the payload for the other semantic models requested by the Job. The result is stored in "submodels" of the job response.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_ess_controller">ESS controller</h4>
<div class="paragraph">
<p>The ESS REST controller is used to provide a RESTful web service to related Environmental and Social Standards functionalities.</p>
</div>
<div class="sect4">
<h5 id="_component_diagram_7">Component diagram</h5>
<div class="imageblock">
<div class="content">
<img src="architecture-constraints/level-2-ess-controller.svg" alt="level 2 ess controller" width="627" height="445">
</div>
</div>
</div>
<div class="sect4">
<h5 id="_component_description_7">Component description</h5>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Components</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">EssService</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Service contains business logic for investigation if part is inside supply chain.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">IrsItemGraphQueryService</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Service for retrieving item graph.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">BpnInvestigationJobCache</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Interface for storing incident data blobs.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">EssRecursiveNotificationHandler</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Business logic handling recursive investigation and results calculation. Responsible for sending and receiving EDC notifications.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_irs_api_2">IRS API</h3>
<div class="sect3">
<h4 id="_references">References</h4>
<div class="paragraph">
<p>The Swagger documentation can be found in the local deployment of the reference application. More information can be found in the GitHub repository: <a href="https://github.com/eclipse-tractusx/item-relationship-service/blob/main/README.md" class="bare">https://github.com/eclipse-tractusx/item-relationship-service/blob/main/README.md</a></p>
</div>
<div class="paragraph">
<p>Since we cannot rely on synchronous responses regarding the requests of submodel endpoints, we designed the IRS in a way that it will handle the job management of requesting all needed endpoints in order to build a BoM tree.</p>
</div>
</div>
<div class="sect3">
<h4 id="_irs_interaction_diagram">IRS interaction diagram</h4>
<div class="imageblock">
<div class="content">
<img src="architecture-constraints/irs-api.svg" alt="irs api" width="491" height="577">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_ess_investigation_interaction_diagram">ESS Investigation interaction diagram</h4>
<div class="imageblock">
<div class="content">
<img src="architecture-constraints/ess-api.svg" alt="ess api" width="779" height="471">
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_runtime_view">Runtime view</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_irs_iterative">IRS Iterative</h3>
<div class="paragraph">
<p>This section describes the iterative flow, the main processes of the IRS, and explains how data is transferred and processed when a job is executed.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="architecture-constraints/overall.svg" alt="overall" width="1347" height="1005">
</div>
</div>
<div class="sect3">
<h4 id="_submodel">Submodel</h4>
<div class="paragraph">
<p>This section describes how the IRS fetches submodel payload.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="architecture-constraints/submodel-processing.svg" alt="submodel processing" width="1365" height="721">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_job_orchestration_flow">Job orchestration flow</h4>
<div class="paragraph">
<p>This section describes the job orchestration in IRS.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="architecture-constraints/job-orchestration.svg" alt="job orchestration" width="2804" height="1441">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_policy_store_flow">Policy store flow</h4>
<div class="paragraph">
<p>This section describes the policy store in IRS.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="architecture-constraints/policy-store.svg" alt="policy store" width="664" height="233">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_policy_check_procedure">Policy check procedure</h4>
<div class="paragraph">
<p>This section describes the way IRS is validating policies found in assets.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="architecture-constraints/policy-check.svg" alt="policy check" width="854" height="312">
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_scenario_1_create_job">Scenario 1: Create job</h3>
<div class="paragraph">
<p>This section describes what happens when user creates a new job.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="architecture-constraints/create-job.svg" alt="create job" width="1768" height="665">
</div>
</div>
<div class="sect3">
<h4 id="_overview">Overview</h4>
<div class="paragraph">
<p>If a job is registered via the IRS API, it will be persisted (with its parameters) in the JobStore, where it can be retrieved by further calls and processes.
Then, the starting item ID is extracted, and a new transfer process is handed to the ExecutorService, which will process it asynchronously (see Scenario 2: Job Execution).</p>
</div>
<div class="paragraph">
<p>In the meantime, the JobOrchestrator returns a response to the API caller, which contains the UUID of the new job.
This UUID can then be used by the caller to retrieve information about the job via the API.
The input provided by the caller determines how the job will operate (starting point, recursion depth, aspect filter, &#8230;&#8203;).</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_scenario_2_job_execution">Scenario 2: Job execution</h3>
<div class="paragraph">
<p>This section describes how a job is asynchronously executed inside the IRS.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="architecture-constraints/execute-job.svg" alt="execute job" width="1408" height="656">
</div>
</div>
<div class="sect3">
<h4 id="_overview_2">Overview</h4>
<div class="paragraph">
<p>After a job has been created (see Scenario 1: Create Job), the first transfer containing the root item ID is passed to the ExecutorService. The transfer is then started asynchronously and retrieves the necessary information from the Catena-X network, first by fetching the AAS information from the DigitalTwin registry and then calling the SubmodelProviders for the submodel payload.</p>
</div>
<div class="paragraph">
<p>At least the aspect <a href="https://github.com/eclipse-tractusx/sldt-semantic-models/tree/main/io.catenax.single_level_bom_as_built">SingleLevelBomAsBuilt</a> is required for the tree to be built. If the customer that started the job provided more aspects to be fetched, they will be retrieved here too.
The result of each transfer is stored in the BlobStore.</p>
</div>
<div class="paragraph">
<p>After the transfer process has finished, any subsequent child IDs will be extracted and new transfer processes will be scheduled for those via the ExecutorService. This cycle repeats until all leafs were reached, the specified max depth has been reached, or the job was canceled externally.</p>
</div>
<div class="paragraph">
<p>As soon as all transfers are finished, the results will be combined and stored in the BlobStore again. The job itself will be marked as completed.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_scenario_3_request_for_jobresponse">Scenario 3: Request for JobResponse</h3>
<div class="imageblock">
<div class="content">
<img src="architecture-constraints/request-job.svg" alt="request job" width="951" height="684">
</div>
</div>
<div class="sect3">
<h4 id="_overview_3">Overview</h4>
<div class="paragraph">
<p>When a user requests job details, the IRS looks up the jobId in the persistent job store. If the job exists, it will proceed to fetch the job details and prepare a response object.
Only if the job is in state "COMPLETED" or if the caller has set the parameter "includePartialResults" to true, the IRS will fetch the payload data for the job (relationships, AAS shells and submodels, if applicable) and attach it to the response object.</p>
</div>
<div class="paragraph">
<p>This will then be passed to the caller.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_scenario_4_cancel_job_execution">Scenario 4: Cancel job execution</h3>
<div class="imageblock">
<div class="content">
<img src="architecture-constraints/cancel-job.svg" alt="cancel job" width="1068" height="637">
</div>
</div>
<div class="sect3">
<h4 id="_overview_4">Overview</h4>
<div class="paragraph">
<p>When a user wants to cancel a job execution, the IRS will lookup that job in the persistent job store and transition it to the CANCELED state, if it exists. If a job is canceled, no further requests to the Catena-X network will be performed.</p>
</div>
<div class="paragraph">
<p>Afterwards, the IRS will return the updated job details of the canceled job to the user.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_irs_recursive">IRS Recursive</h3>
<div class="paragraph">
<p>This section covers the main processes of the IRS in a recursive scenario in a network.
This recursive scenario is illustrated using the various use cases realized in the scenario.</p>
</div>
</div>
<div class="sect2">
<h3 id="_use_case_ess_environmental_and_social_standards_top_down_approach">Use Case: ESS (Environmental and Social Standards) Top-Down Approach</h3>
<div class="paragraph">
<p>With the entry into force of the German Supply Chain Due Diligence Act as from January 1st, 2023, German companies are obliged to implement the corresponding requirements of this law.
In addition, the following European directives on this subject have also been adopted: EU regulation 2018/858. This regulation is legally binding to all EU member states.</p>
</div>
<div class="sect3">
<h4 id="_specification">Specification</h4>
<div class="paragraph">
<p>This component enables data providers to provide the BoM as planned aspect models via the Catena-X defined solution stack (i.e. EDC).
The BoM as planned aspect models consists of three aspect models:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>PartAsPlanned - Masterdata of a Part Type incl. location related data (e.g. production sites)</p>
</li>
<li>
<p>SingleLevelBomAsPlanned - The relation to child part types provided by the supplier of the given company</p>
</li>
<li>
<p>PartSiteInformationAsPlanned - Relation to Sites in order to resemble the flow of the specific part/material</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_overall_flow">Overall flow</h4>
<div class="imageblock">
<div class="content">
<img src="architecture-constraints/ess-top-down.svg" alt="ess top down" width="1201" height="748">
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Step</th>
<th class="tableblock halign-left valign-top">Actor</th>
<th class="tableblock halign-left valign-top">Action</th>
<th class="tableblock halign-left valign-top">Details</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>[000]</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IncidentManager</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Request ESS Incident investigation</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>[001]</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Inquiring OEM Company</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check direct suppliers</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Inquiring OEM Company</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check BPNS in direct suppliers</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>[002]</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Inquiring OEM Company</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Forward incident to Tier N+1 Supplier</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>[003]</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tier N+1 Supplier</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check direct suppliers</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tier N+1 Supplier</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check BPNS in direct suppliers</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tier N+1 Supplier</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Forward incident to Tier N+n Supplier</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>[004]</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tier N+n Supplier</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check direct suppliers</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tier N+n Supplier</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check BPNS in direct suppliers</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tier N+n Supplier</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Return responses (including hops) to Tier N+1 Supplier</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ESS supplier response</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>[005]</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tier N+1 Supplier</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Aggregate results</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tier N+1 Supplier</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Return responses (including hops) to Inquiring OEM Company</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ESS supplier response</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>[006]</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Inquiring OEM Company</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Aggregate results</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Inquiring OEM Company</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check subgraph infection on first tier level</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>[007]</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IncidentManager</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Receive incident report from Inquiring OEM Company</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Note: ESS supplier responses are involved in each step of the process.</p>
</div>
</div>
<div class="sect3">
<h4 id="_flow_on_company_level">Flow on company level</h4>
<div class="imageblock">
<div class="content">
<img src="architecture-constraints/ess-top-down-highlevel.svg" alt="ess top down highlevel" width="2254" height="1758">
</div>
</div>
<div class="sect4">
<h5 id="_step_0_process_initiation">Step 0: Process initiation</h5>
<div class="paragraph">
<p>The process is initiated by an ESS incident, that is received by (or created within) the inquiring company.
This ESS incident acts as the root incident for the overall process The incident contains a company name (incl. address) and a valid BPN exists for that company.
The BPN (a BPNL or BPNS) can be looked up in BPDM.</p>
</div>
</div>
<div class="sect4">
<h5 id="_step_1_check_direct_suppliers">Step 1: Check direct suppliers</h5>
<div class="paragraph">
<p>The inquiring company checks, if the company of the incident is a direct supplier of them.
In order to perform this check, the following data must be available in the inquiring company:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Full list of direct suppliers</p>
</li>
<li>
<p>Full list of parts supplied by those direct suppliers</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In case the company of the incident is a direct supplier of the inquiring company, the process ends.
In case the company of the incident is not a direct supplier of the inquiring company, Step 2 is executed.</p>
</div>
</div>
<div class="sect4">
<h5 id="_step_2_forward_incident">Step 2: Forward Incident</h5>
<div class="paragraph">
<p>The incident is forwarded to all direct suppliers.
Each direct supplier is sent a "personalized" request to evaluate, if the inquiring company is impacted by the incident.
The incident is enhanced with additional data by the inquiring company:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>List of parts, that are supplied to the inquiring company by their direct supplier.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Each direct supplier executes Step 1.</p>
</div>
</div>
<div class="sect4">
<h5 id="_step_3_gather_responses">Step 3: Gather Responses</h5>
<div class="paragraph">
<p>The inquiring company collects the (asynchronous) responses.
The response of each direct supplier may contain the following results;</p>
</div>
<div class="ulist">
<ul>
<li>
<p>YES  The company of the incident was found in the supply chain of the given list of parts</p>
</li>
<li>
<p>NO  The company of the incident was not found in the supply chain of the given list of parts</p>
</li>
<li>
<p>UNKNOWN  The query timed out or some other error occurred</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In case at least one "YES" is received, the process step 3 ends</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 66.6666%;">
<col style="width: 11.1111%;">
<col style="width: 11.1111%;">
<col style="width: 11.1112%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Case</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">YES</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NO</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">UNKNOWN</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">All assets on all nodes does not contain assets with incidentBPNs</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">At least one node contains assets with  incidentBPNs</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">At least one node does not contain PartSiteInformationAsPlanned aspect OR for at least one node PartSiteInformationAsPlanned  aspect  is not accessible</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">At least one node contains PartSiteInformationAsPlanned  with missing BPNS</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">At least one child node does not exist or is not accessible</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 10%;">
<col style="width: 10%;">
<col style="width: 10%;">
<col style="width: 20%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">State 1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">State 2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">State n</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Result State</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Description</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">YES</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NO</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">UNKOWN</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">YES</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If any part is impacted then whole Supply is impactes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">YES</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NO</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NO</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">YES</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes if any BPN is impacted even if all are not impacted.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">NO</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">UNKNOW</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NO</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">UNKNOW</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unknown if no Yes and at leat one bpn is unknown state.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">NO</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NO</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NO</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NO</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No if complete SupplyChain is not impacted</p></td>
</tr>
</tbody>
</table>
<div class="imageblock">
<div class="content">
<img src="architecture-constraints/ess_top_down_sequence-result.svg" alt="ess top down sequence result" width="728" height="287">
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_application_functionality_overview">Application Functionality Overview</h4>
<div class="sect4">
<h5 id="_register_an_ess_investigation_order">Register an Ess-Investigation-Order</h5>
<div class="imageblock">
<div class="content">
<img src="architecture-constraints/ess-top-down-highlevel.svg" alt="ess top down highlevel" width="2254" height="1758">
</div>
</div>
<div class="sect5">
<h6 id="_1_client_request">1. Client Request</h6>
<div class="paragraph">
<p>The <em>Client App (Script)</em> initiates a request to the IRS (Item Relationship Service) by sending a GET request for shell lookup based on a specific BPN (Business Partner Number).</p>
</div>
</div>
<div class="sect5">
<h6 id="_2_shell_lookup">2. Shell Lookup</h6>
<div class="paragraph">
<p>IRS, along with other services like DiscoveryFinder, EDCDiscoveryService, and Digital Twin Registry, collaborates to look up shells for the given BPN, returning an array of AAS identifiers.</p>
</div>
</div>
<div class="sect5">
<h6 id="_3_aas_descriptor_retrieval">3. AAS Descriptor Retrieval</h6>
<div class="paragraph">
<p>For each AAS identifier, the client requests the IRS for the corresponding shell descriptors, adding them to a collection.</p>
</div>
</div>
<div class="sect5">
<h6 id="_4_filtering_aas">4. Filtering AAS</h6>
<div class="paragraph">
<p>The <em>Client App (Script)</em> filters the AAS collection for SubmodelDescriptors marked <em>asPlanned</em>, based on certain criteria.</p>
</div>
</div>
<div class="sect5">
<h6 id="_5_incident_registration">5. Incident Registration</h6>
<div class="paragraph">
<p>The client then initiates an IRS incident registration by sending a POST request with specific parameters, including bomLifecycle and callback URL.</p>
</div>
</div>
<div class="sect5">
<h6 id="_6_incident_handling_loop">6. Incident Handling Loop</h6>
<div class="paragraph">
<p>IRS proceeds to handle the incident by iterating through AAS identifiers, extracting child CXIds, and performing checks on associated data.</p>
</div>
</div>
<div class="sect5">
<h6 id="_7_data_validation">7. Data Validation</h6>
<div class="paragraph">
<p>The system checks the validity period of the received data and, if valid, proceeds to extract additional information.</p>
</div>
</div>
<div class="sect5">
<h6 id="_8_incident_response">8. Incident Response</h6>
<div class="paragraph">
<p>If certain conditions are met (e.g., incidentBpns contain catenaXsiteId), the system responds to the client indicating a part-chain infection.</p>
</div>
</div>
<div class="sect5">
<h6 id="_9_notification_handling">9. Notification Handling</h6>
<div class="paragraph">
<p>Otherwise, the system sends an ess-request notification to the next tier level IRS, and after processing the request on the next tier level, receives an ess-response notification.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_scenario_1_register_an_ess_investigation_order">Scenario 1: Register an Ess-Investigation-Order</h3>
<div class="paragraph">
<p>This section describes what happens when user creates an ess order.</p>
</div>
<div class="sect3">
<h4 id="_register_an_ess_investigation_order_2">Register an Ess-Investigation-Order</h4>
<div class="imageblock">
<div class="content">
<img src="architecture-constraints/ess-topdown-order.svg" alt="ess topdown order" width="1962" height="734">
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Step</th>
<th class="tableblock halign-left valign-top">Actor</th>
<th class="tableblock halign-left valign-top">Action</th>
<th class="tableblock halign-left valign-top">Details</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[000]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Client</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sends a POST request to <code>/ess/bpn/investigation/orders</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Includes JSON payload with parameters like "bomLifecycle," "batchSize," "callbackUrl," "incidentBPNSs," "keys," and "timeout."</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[001]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IRS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Initiates initial order processing</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Begins asynchronous processing of ESS process for "incidentBPNSs" and tuples of "globalAssetId" and "BPN."</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[002]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IRS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Registers callback</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Establishes a callback mechanism with the provided callback URL.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[003]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Client</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Receives 201 success response</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Indicates successful registration of the order.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[004]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Client</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sends a GET request to <code>/irs/orders/{orderId}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Requests information for a specific orderId.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[005]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IRS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Processes GET request</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Initiates processing of the requested orderId.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[006]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IRS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sends a 200 response with order payload</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Returns the details of the processed order.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[007]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Client</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optionally initiates batch completion</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Completes the batch processing if required.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[008]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Client</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sends a POST request to <code>/irs/orders/{orderId}/batches/'{batchId}'</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Initiates batch processing for a specific orderId and batchId.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[009]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IRS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sends BatchShell with jobs</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Returns details of the batch with associated jobs.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_scenario_2_register_an_ess_investigation_job">Scenario 2: Register an Ess-Investigation-Job</h3>
<div class="paragraph">
<p>This section describes what happens when user creates an ess job.</p>
</div>
<div class="sect3">
<h4 id="_register_an_ess_investigation_job">Register an Ess-Investigation Job</h4>
<div class="imageblock">
<div class="content">
<img src="architecture-constraints/ess-topdown-order-job.svg" alt="ess topdown order job" width="2978" height="1414">
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Step</th>
<th class="tableblock halign-left valign-top">Actor</th>
<th class="tableblock halign-left valign-top">Action</th>
<th class="tableblock halign-left valign-top">Details</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[000]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Requestor</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sends a POST request to <code>/ess/bpn/investigations</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Includes JSON payload with parameters such as "bomLifecycle," "callbackUrl," "incidentBpns," and "key" containing "bpn" and "globalAssetId."</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[001]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IRS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Registers an IRS ess incident job</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Initiates the registration of an IRS ess incident job based on the received request.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[002]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IRS, DiscoveryFinder, EDCDiscoveryService, EDC, dDTR</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Look up shells for the given globalAssetId</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Conducts a lookup and retrieves AAS (Asset Administration Shell) for the specified globalAssetId.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[003]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IRS &#8594; SubmodelServer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sends a GET request for SingleLevelBomAsPlanned</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Initiates a request to the SubmodelServer for the SingleLevelBomAsPlanned.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[004]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SubmodelServer &#8594; IRS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Receives SingleLevelBomAsPlanned</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sends back the SingleLevelBomAsPlanned data to the IRS.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[005]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IRS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Extracts childCXIds from SingleLevelBomAsPlanned</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Processes and extracts childCXIds from the received SingleLevelBomAsPlanned.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[006]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Loop (for each childCXId)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IRS, DiscoveryFinder, EDCDiscoveryService</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Get EDC endpoint for Tier1, Retrieves the EDC endpoint for Tier1 based on the childCXId.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[007]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IRS, EDCTier1, dDTRTier1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Look up shells for the given globalAssetId</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Conducts a lookup and retrieves AAS for the specified globalAssetId in Tier1.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[008]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IRS &#8594; SubmodelServer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sends a request to get PartAsPlanned</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Initiates a request to the SubmodelServer to get PartAsPlanned.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[009]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SubmodelServer &#8592; IRS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Receives PartAsPlanned</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Gets PartAsPlanned data from the SubmodelServer.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[010]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IRS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Validity Check on PartAsPlanned validityPeriod</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Checks the validity period of PartAsPlanned.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[011]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IRS &#8594; SubmodelServer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sends a GET request for PartSiteInformationAsPlanned</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Requests PartSiteInformationAsPlanned from the SubmodelServer.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[012]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IRS &#8594; IRS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Extracts catenaXsiteId from PartSiteInformationAsPlanned</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Processes and extracts catenaXsiteId from PartSiteInformationAsPlanned.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[013]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IRS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Matches "incidentBpns" and catenaXsiteId</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Checks for a match between "incidentBpns" and catenaXsiteId.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[014]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IRS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Detects the supplyChainImpacted on the first tier level</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Identifies the supply chain impacted on the first tier level and provides information.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[015]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Requestor &#8592; IRS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Responds part-chain infected</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Receives the response indicating the part-chain infection.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[016]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IRS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Continues the loop</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Continues the loop for the remaining childCXIds.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[017]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Loop (end)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IRS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Loop completion</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_deployment_view">Deployment view</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The deployment view shows the IRS application on ArgoCD, which is a continuous delivery tool for Kubernetes. Kubernetes manifests are specified using Helm charts. Helm is a package manager for Kubernetes. IRS is developed in a cloud-agnostic manner, so the application could be installed in any cloud infrastructure (on-premises, hybrid, or public cloud infrastructure).</p>
</div>
<div class="imageblock">
<div class="content">
<img src="architecture-constraints/deployment-view.svg" alt="deployment view" width="595" height="347">
</div>
</div>
<div class="sect2">
<h3 id="_operator">Operator</h3>
<div class="paragraph">
<p>Manual preparation is required to initially set up the ArgoCD apps and the credentials in the HashiCorp Vault. This is done by the IRS system operator.</p>
</div>
</div>
<div class="sect2">
<h3 id="_argocd">ArgoCD</h3>
<div class="paragraph">
<p>Argo CD is a declarative, GitOps continuous delivery tool for Kubernetes. See <a href="https://argo-cd.readthedocs.io/" class="bare">https://argo-cd.readthedocs.io/</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_vault">Vault</h3>
<div class="paragraph">
<p>HashiCorp Vault stores credentials, which are picked up by ArgoCD to deploy them to the application.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Every secret information needed at runtime must be stored here and must never be part of the IRS Helm charts
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_github">GitHub</h3>
<div class="paragraph">
<p>GitHub contains the application source code as well as the Helm charts used for deployment.
The IRS Helm charts can be found here: <a href="https://github.com/eclipse-tractusx/item-relationship-service/tree/main/charts" class="bare">https://github.com/eclipse-tractusx/item-relationship-service/tree/main/charts</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_docker_hub">Docker Hub</h3>
<div class="paragraph">
<p>When the IRS is built by GitHub Action workflows, the final image is pushed to Docker Hub, where it can be picked up for deployment.</p>
</div>
</div>
<div class="sect2">
<h3 id="_kubernetes">Kubernetes</h3>
<div class="paragraph">
<p>The kubernetes cluster manages the underlying hardware that is used to run the applications defined in the Helm charts.</p>
</div>
</div>
<div class="sect2">
<h3 id="_local_deployment">Local deployment</h3>
<div class="paragraph">
<p>For information on how to run the application locally, please check the README documentation in GitHub: <a href="https://github.com/eclipse-tractusx/item-relationship-service/blob/main/README.md" class="bare">https://github.com/eclipse-tractusx/item-relationship-service/blob/main/README.md</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_view_levels">View Levels</h3>
<div class="sect3">
<h4 id="_level_0_cluster_overview">Level 0 - Cluster overview</h4>
<div class="sect4">
<h5 id="_isolated_environment">Isolated environment</h5>
<div class="paragraph">
<p>The isolated environment contains the IRS as well as all surrounding services.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="architecture-constraints/isolated.svg" alt="isolated" width="1455" height="487">
</div>
</div>
</div>
<div class="sect4">
<h5 id="_development_environment">Development environment</h5>
<div class="paragraph">
<p>The development environment contains the IRS as well as the essential surrounding services, excluding the external IAM.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="architecture-constraints/development.svg" alt="development" width="725" height="323">
</div>
</div>
</div>
<div class="sect4">
<h5 id="_integrated_environment">Integrated environment</h5>
<div class="paragraph">
<p>The integrated environment contains the IRS and is integrated with the rest of the Catena-X network.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="architecture-constraints/integrated.svg" alt="integrated" width="710" height="310">
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_level_1_irs_application">Level 1 - IRS application</h4>
<div class="paragraph">
<p>This section focuses only on the IRS itself, detached from its neighbors. It shows the resources deployed in Kubernetes for the IRS.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="architecture-constraints/irs-resources.svg" alt="irs resources" width="557" height="537">
</div>
</div>
<div class="sect4">
<h5 id="_pod">Pod</h5>
<div class="paragraph">
<p>This is the actual IRS Docker image which runs as a container. The ports are only available internally and can be opened up with the Service.</p>
</div>
</div>
<div class="sect4">
<h5 id="_secrets">Secrets</h5>
<div class="paragraph">
<p>The secret information (e.g. connection credentials) is stored here and provided to the Pod at runtime.</p>
</div>
</div>
<div class="sect4">
<h5 id="_service">Service</h5>
<div class="paragraph">
<p>The service resource opens up selected ports of the Pod so that other applications in the same cluster can access it or to be used by the Ingress.</p>
</div>
</div>
<div class="sect4">
<h5 id="_ingress">Ingress</h5>
<div class="paragraph">
<p>The ingress uses a reverse proxy to provide specified Service ports to the internet under a specified URL. This make the IRS API publicly available.</p>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_cross_cutting_concepts">Cross-cutting concepts</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_domain_concepts">Domain concepts</h3>
<div class="sect3">
<h4 id="_domain_entity_model">Domain entity model</h4>
<div class="imageblock">
<div class="content">
<img src="architecture-constraints/domain-entity-model.svg" alt="domain entity model" width="2747" height="1146">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_domain_model">Domain model</h4>
<div class="imageblock">
<div class="content">
<img src="architecture-constraints/domain-model.svg" alt="domain model" width="2045" height="646">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_api_model">API Model</h4>
<div class="paragraph">
<p>For detailed information about the API model, please refer to the <a href="https://eclipse-tractusx.github.io/item-relationship-service/docs/api-specification/api-specification.html">API specification</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_jobstatus">JobStatus</h4>
<div class="paragraph">
<p>A job can be in one of the following states:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">State</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">UNSAVED</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The job was created, but not yet stored by the system.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">INITIAL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The job was stored by the system and is now queued for processing.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">IN_PROGRESS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The job is currently being processed.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">TRANSFERS_FINISHED</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">All transfers for the job have been finished, and it is now being finalized.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">COMPLETED</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The job has completed. See the job response for details on the data.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ERROR</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The job could not be processed correctly by the IRS due to a technical problem.</p></td>
</tr>
</tbody>
</table>
<div class="imageblock">
<div class="content">
<img src="architecture-constraints/job-state-machine.svg" alt="job state machine" width="1533" height="282">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_job_store_datamodel">Job Store Datamodel</h4>
<div class="imageblock">
<div class="content">
<img src="architecture-constraints/inmemory-model.svg" alt="inmemory model" width="2144" height="294">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_job_response_datamodel">Job Response Datamodel</h4>
<div class="imageblock">
<div class="content">
<img src="architecture-constraints/job-response-model.svg" alt="job response model" width="3567" height="866">
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_safety_and_security_concepts">Safety and security concepts</h3>
<div class="sect3">
<h4 id="_authentication_authorization">Authentication / Authorization</h4>
<div class="sect4">
<h5 id="_irs_api_3">IRS API</h5>
<div class="paragraph">
<p>The IRS API is secured using API Keys (tokens that a client provides when invoking API calls). IRS identifies API clients based on the provided token inside 'X-API-KEY' request header, and then checks the token with configuration. API Keys can be configured with helm configuration entries - check Administration Guide to know how to do this. Every request to the IRS API requires a valid 'X-API-KEY' header to be successfully authenticated.</p>
</div>
<div class="paragraph">
<p>Currently, IRS API handles two roles: <strong>'admin_irs'</strong> and <strong>'view_irs'.</strong> A valid token with the <strong>'admin_irs'</strong> role can access any endpoint exposed by the IRS API, including Policies management API. A valid token with the <strong>'view_irs'</strong> role does not have access to policies endpoints.
This behavior is shown in the table below.</p>
</div>
<div class="sect5">
<h6 id="_rights_and_roles_matrix_of_irs">Rights and Roles Matrix of IRS</h6>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Category</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Action</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Endpoint</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">view_irs</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">admin_irs</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Policy Store</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Add policy</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">POST /irs/policies</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Get policies</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET /irs/policies</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Find policies (paged)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET /irs/policies/paged</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Update policy</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PUT /irs/policies/{policyId}</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Delete policy</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DELETE /irs/policies/{policyId}</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Aspect models</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Get aspect models</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET /irs/aspectmodels</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Job processing</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Register job</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">POST /irs/jobs</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Get jobs</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET /irs/jobs</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Get job</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET /irs/jobs/{jobId}</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cancel job</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PUT /irs/jobs/{jobId}</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Batch processing</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Register order</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">POST /irs/orders</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Get order</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET /irs/orders/{orderId}</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cancel order</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PUT /irs/orders/{orderId}</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Get batch</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET /irs/orders/{orderId}/batches/{batchId}</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Environmental- and
Social Standards</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Register investigation job</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">POST /ess/bpn/investigations</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Get investigation job</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET /ess/bpn/investigations{id}</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Accept notifications</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">POST /ess/notification/receive</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Legend: x = full access to all resources</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_irs_as_dtr_client">IRS as DTR client</h5>
<div class="paragraph">
<p>The IRS acts as a client for the Digital Twin Registry (DTR), which is secured using OAuth2.0 / Open ID Connect.
The IRS uses client credentials to authenticate requests to the DTR.
Due to this, the IRS account needs to have access to every item in the DTR, unrelated to the permissions of the account calling the IRS API.</p>
</div>
</div>
<div class="sect4">
<h5 id="_irs_as_decentralized_dtr_client">IRS as decentralized DTR client</h5>
<div class="paragraph">
<p>In a decentralized network, IRS uses the EDC client to access the provider DTR.
This way, no authentication, other than the EDC contract negotiation, is needed to access the DTR.</p>
</div>
</div>
<div class="sect4">
<h5 id="_irs_as_edc_client">IRS as EDC client</h5>
<div class="paragraph">
<p>The IRS accesses the Catena-X network via the EDC consumer connector.
This component requires authentication via a Verifiable Credential (VC), which is provided to the EDC via the Managed Identity Wallet.</p>
</div>
<div class="paragraph">
<p>The VC identifies and authenticates the EDC and is used to acquire access permissions for the data transferred via EDC.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_credentials">Credentials</h4>
<div class="paragraph">
<p>Credentials must never be stored in Git!</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_architecture_and_design_patterns">Architecture and design patterns</h3>
<div class="sect3">
<h4 id="_dependency_inversion">Dependency inversion</h4>
<div class="paragraph">
<p>For the IRS, we utilize the dependency inversion mechanisms provided by Spring Boot as much as possible.</p>
</div>
<div class="paragraph">
<p>The principle says:</p>
</div>
<div class="paragraph">
<p>High-level modules should not import anything from low-level modules. Both should depend on abstractions (e.g., interfaces).
Abstractions should not depend on details. Details (concrete implementations) should depend on abstractions.</p>
</div>
<div class="paragraph">
<p>Adhering to this, we define clear interfaces between the different domains (e.g. job orchestration and AAS communication) in the IRS and let dependencies be injected by the framework. This improves testability of the classes as well.</p>
</div>
</div>
<div class="sect3">
<h4 id="_hexagonal_architecture">Hexagonal architecture</h4>
<div class="paragraph">
<p>The hexagonal architecture divides a system into several loosely-coupled interchangeable components, such as the application core, the database, the user interface, test scripts and interfaces with other systems. This approach is an alternative to the traditional layered architecture.</p>
</div>
<div class="paragraph">
<p>For the IRS, this means decoupling the application logic from components like the BLOB store, the REST API controllers or the AAS client connection. With an interface between the parts (so-called port), it is easy to switch to other implementations, e.g. if you want to change the persistence implementation. No changes to the application logic will be necessary.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="architecture-constraints/architecture.svg" alt="architecture" width="710" height="507">
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_under_the_hood_concepts">"Under-the-hood" concepts</h3>
<div class="sect3">
<h4 id="_persistence">Persistence</h4>
<div class="paragraph">
<p>The IRS stores two types of data in a persistent way:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Job metadata</p>
</li>
<li>
<p>Job payloads, e.g. AAS shells or submodel data</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>All of this is data is stored in an object store.
The currently used implementation is Minio (Amazon S3 compatible).
This reduces the complexity in storing and retrieving data.
There also is no predefined model for the data, every document can be stored as it is.
The downside of this approach is lack of query functionality, as we can only search through the keys of the entries but not based on the value data.
In the future, another approach or an additional way to to index the data might be required.</p>
</div>
<div class="paragraph">
<p>To let the data survive system restarts, Minio needs to use a persistent volume for the data storage.
A default configuration for this is provided in the Helm charts.</p>
</div>
</div>
<div class="sect3">
<h4 id="_transaction_handling">Transaction handling</h4>
<div class="paragraph">
<p>There currently is no transaction management in the IRS.</p>
</div>
</div>
<div class="sect3">
<h4 id="_session_handling">Session handling</h4>
<div class="paragraph">
<p>There is no session handling in the IRS, access is solely based on bearer tokens, the API is stateless.</p>
</div>
</div>
<div class="sect3">
<h4 id="_communication_and_integration">Communication and integration</h4>
<div class="paragraph">
<p>All interfaces to other systems are using RESTful calls over HTTP(S).
Where central authentication is required, a common OAuth2 provider is used.</p>
</div>
<div class="paragraph">
<p>For outgoing calls, the Spring RestTemplate mechanism is used and separate RestTemplates are created for the different ways of authentication.</p>
</div>
<div class="paragraph">
<p>For incoming calls, we utilize the Spring REST Controller mechanism, annotating the interfaces accordingly and also documenting the endpoints using OpenAPI annotations.</p>
</div>
</div>
<div class="sect3">
<h4 id="_exception_and_error_handling">Exception and error handling</h4>
<div class="paragraph">
<p>There are two types of potential errors in the IRS:</p>
</div>
<div class="sect4">
<h5 id="_technical_errors">Technical errors</h5>
<div class="paragraph">
<p>Technical errors occur when there is a problem with the application itself, its configuration or directly connected infrastructure, e.g. the Minio persistence.
Usually, the application cannot solve these problems by itself and requires some external support (manual work or automated recovery mechanisms, e.g. Kubernetes liveness probes).</p>
</div>
<div class="paragraph">
<p>These errors are printed mainly to the application log and are relevant for the healthchecks.</p>
</div>
</div>
<div class="sect4">
<h5 id="_functional_errors">Functional errors</h5>
<div class="paragraph">
<p>Functional errors occur when there is a problem with the data that is being processed or external systems are unavailable and data cannot be sent / fetched as required for the process.
While the system might not be able to provide the required function at that moment, it may work with a different dataset or as soon as the external systems recover.</p>
</div>
<div class="paragraph">
<p>These errors are reported in the Job response and do not directly affect application health.</p>
</div>
</div>
<div class="sect4">
<h5 id="_rules_for_exception_handling">Rules for exception handling</h5>
<div class="sect5">
<h6 id="_throw_or_log_dont_do_both">Throw or log, don&#8217;t do both</h6>
<div class="paragraph">
<p>When catching an exception, either log the exception and handle the problem or rethrow it, so it can be handled at a higher level of the code.
By doing both, an exception might be written to the log multiple times, which can be confusing.</p>
</div>
</div>
<div class="sect5">
<h6 id="_write_own_base_exceptions_for_internal_interfaces">Write own base exceptions for (internal) interfaces</h6>
<div class="paragraph">
<p>By defining a common (checked) base exception for an interface, the caller is forced to handle potential errors, but can keep the logic simple.
On the other hand, you still have the possibility to derive various, meaningful exceptions for different error cases, which can then be thrown via the API.</p>
</div>
<div class="paragraph">
<p>Of course, when using only RuntimeExceptions, this is not necessary - but those can be overlooked quite easily, so be careful there.</p>
</div>
</div>
<div class="sect5">
<h6 id="_central_fallback_exception_handler">Central fallback exception handler</h6>
<div class="paragraph">
<p>There will always be some exception that cannot be handled inside of the code correctly - or it may just have been unforeseen.
A central fallback exception handler is required so all problems are visible in the log and the API always returns meaningful responses.
In some cases, this is as simple as a HTTP 500.</p>
</div>
</div>
<div class="sect5">
<h6 id="_dont_expose_too_much_exception_details_over_api">Dont expose too much exception details over API</h6>
<div class="paragraph">
<p>It&#8217;s good to inform the user, why their request did not work, but only if they can do something about it (HTTP 4xx).
So in case of application problems, you should not expose details of the problem to the caller.
This way, we avoid opening potential attack vectors.</p>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_parallelization_and_threading">Parallelization and threading</h4>
<div class="paragraph">
<p>The heart of the IRS is the parallel execution of planned jobs.
As almost each job requires multiple calls to various endpoints, those are done in parallel as well to reduce the total execution time for each job.</p>
</div>
<div class="paragraph">
<p>Tasks execution is orchestrated by the JobOrchestrator class.
It utilizes a central ExecutorService, which manages the number of threads and schedules new Task as they come in.</p>
</div>
</div>
<div class="sect3">
<h4 id="_plausibility_checks_and_validation">Plausibility checks and validation</h4>
<div class="paragraph">
<p>Data validation happens at two points:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>IRS API: the data sent by the client is validated to match the model defined in the IRS.
If the validation fails, the IRS sends a HTTP 400 response and indicates the problem to the caller.</p>
</li>
<li>
<p>Submodel payload: each time a submodel payload is requested from via EDC, the data is validated against the model defined in the SemanticHub for the matching aspect type.</p>
</li>
<li>
<p>EDC Contract Offer Policy: each time IRS consumes data over the EDC, the policies of the offered contract will be validated.
IDs of so-called "Rahmenvertrgen" or Framework-Agreements can be added to the IRS Policy Store to be accepted by the IRS.
If a Contract Offer does not match any of the IDs store in Policy Store, the contract offer will be declined and no data will be consumed.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_policy_store">Policy Store</h4>
<div class="paragraph">
<p>The IRS gives its users the ability to manage, create and delete complex policies containing permissions and constraints in order to obtain the most precise control over access and use of data received from the edc provider.
Policies stored in Policy Store will serve as input with allowed restriction and will be checked against every item from EDC Catalog.</p>
</div>
<div class="paragraph">
<p>The structure of a Policy that can be stored in storage can be easily viewed by using Policy Store endpoints in the published API documentation.
Each policy may contain more than one permission, which in turn consists of constraints linked together by AND or OR relationships.
This model provides full flexibility and control over stored access and use policies.</p>
</div>
</div>
<div class="sect3">
<h4 id="_digital_twin_edc_requirements">Digital Twin / EDC requirements</h4>
<div class="paragraph">
<p>In order to work with the decentral network approach, IRS requires the Digital Twin to contain a <code>"subprotocolBody"</code> in each of the submodelDescriptor endpoints.
This <code>"subprotocolBody"</code> has to contain the <code>"id"</code> of the EDC asset, as well as the <code>"dspEndpoint"</code> of the EDC, separated by a semicolon (e.g. <code>"subprotocolBody": "id=123;dspEndpoint=http://edc.control.plane/api/v1/dsp"</code>).</p>
</div>
<div class="paragraph">
<p>The <code>"dspEndpoint"</code> is used to request the EDC catalog of the dataprovider and the <code>"id"</code> to filter for the exact asset inside this catalog.</p>
</div>
<div class="paragraph">
<p>If the <code>"dspEndpoint"</code> is not present, every available EDC endpoint in DiscoveryService will be queried until a asset with the <code>"id"</code> can be found.</p>
</div>
</div>
<div class="sect3">
<h4 id="_caching">Caching</h4>
<div class="paragraph">
<p>The IRS caches data provided externally to avoid unnecessary requests and reduce execution time.</p>
</div>
<div class="paragraph">
<p>Caching is implemented for the following services:</p>
</div>
<div class="sect4">
<h5 id="_semantics_hub">Semantics Hub</h5>
<div class="paragraph">
<p>Whenever a semantic model schema is requested from the Semantic Hub, it is stored locally until the cache is evicted (configurable).
The IRS can preload configured schema models on startup to reduce on demand call times.</p>
</div>
<div class="paragraph">
<p>Additionally, models can be deployed with the system as a backup to the real Semantic Hub service.</p>
</div>
</div>
<div class="sect4">
<h5 id="_discovery_service_2">Discovery Service</h5>
<div class="paragraph">
<p>The IRS uses the Discovery Finder in order to find the correct EDC Discovery URL for the type BPN.
This URL is cached locally.</p>
</div>
<div class="paragraph">
<p>When the EDC Discovery is requested to return the EDC connector endpoint URLs for a specific BPN, the results are cached as well.</p>
</div>
<div class="paragraph">
<p>The time to live for both caches can be configured separately as described in the Administration Guide.</p>
</div>
<div class="paragraph">
<p>Further information on Discovery Service can be found in the chapter "System scope and context".</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_discovery_process">Discovery Process</h4>
<div class="sect4">
<h5 id="_digital_twin_registry">Digital Twin Registry</h5>
<div class="paragraph">
<p>The Dataspace Discovery Service handles multiple EDC-Urls received for BPN.
This applies to the following scenarios.</p>
</div>
<div class="sect5">
<h6 id="_scenario_1_one_edc_with_multiple_dtrs">Scenario 1: One EDC with multiple DTRs</h6>
<div class="paragraph">
<p>IRS queries all DTRs for the globalAssetId and will take the first result it gets.
If none of the DTRs return a result, IRS will create a tombstone.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="architecture-constraints/discovery-DTR--one-EDC-with-multiple-DTRs.svg" alt="discovery DTR  one EDC with multiple DTRs" width="535" height="478">
</div>
</div>
<div class="paragraph">
<p>Same diagram with a little more detail on IRS side:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="architecture-constraints/discovery-DTR--one-EDC-with-multiple-DTRs--detailed.svg" alt="discovery DTR  one EDC with multiple DTRs  detailed" width="904" height="778">
</div>
</div>
</div>
<div class="sect5">
<h6 id="_scenario_2_multiple_edcs_with_one_dtr">Scenario 2: Multiple EDCs with one DTR</h6>
<div class="paragraph">
<p>IRS starts a contract negotiation for all registry contract offers in parallel and queries the DTRs for all successful negotiations.
The first registry which responds with a DT will be the one used by IRS.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="architecture-constraints/discovery-DTR--multiple-EDCs-with-one-DTR.svg" alt="discovery DTR  multiple EDCs with one DTR" width="729" height="540">
</div>
</div>
<div class="paragraph">
<p>Same diagram with a little more detail on IRS side:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="architecture-constraints/discovery-DTR--multiple-EDCs-with-one-DTR--detailed.svg" alt="discovery DTR  multiple EDCs with one DTR  detailed" width="1091" height="942">
</div>
</div>
</div>
<div class="sect5">
<h6 id="_scenario_3_one_edc_with_one_dtr">Scenario 3: One EDC with one DTR</h6>
<div class="paragraph">
<p>Only one EDC found for BPN and the catalog only contains one offer for the DTR.
IRS will use this registry and will create a tombstone if no DT could be found for the globalAssetId.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="architecture-constraints/discovery-DTR--one-EDC-with-one-DTR.svg" alt="discovery DTR  one EDC with one DTR" width="422" height="295">
</div>
</div>
<div class="paragraph">
<p>Same diagram with a little more detail on IRS side:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="architecture-constraints/discovery-DTR--one-EDC-with-one-DTR--detailed.svg" alt="discovery DTR  one EDC with one DTR  detailed" width="787" height="494">
</div>
</div>
</div>
<div class="sect5">
<h6 id="_scenario_4_multiple_edcs_with_multiple_dtrs">Scenario 4: Multiple EDCs with multiple DTRs</h6>
<div class="paragraph">
<p>IRS starts a contract negotiation for all the registry offers.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="architecture-constraints/discovery-DTR--multiple-EDCs-with-multiple-DTRs.svg" alt="discovery DTR  multiple EDCs with multiple DTRs" width="729" height="627">
</div>
</div>
<div class="paragraph">
<p>Same diagram with a little more detail on IRS side:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="architecture-constraints/discovery-DTR--multiple-EDCs-with-multiple-DTRs--detailed.svg" alt="discovery DTR  multiple EDCs with multiple DTRs  detailed" width="1163" height="1454">
</div>
</div>
</div>
<div class="sect5">
<h6 id="_scenario_5_multiple_edcs_with_no_dtrs">Scenario 5: Multiple EDCs with no DTRs</h6>
<div class="paragraph">
<p>IRS starts a contract negotiation for all the registry offers and creates a tombstone since no DTR could be discovered.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="architecture-constraints/discovery-DTR--multiple-EDCs-with-no-DTRs.svg" alt="discovery DTR  multiple EDCs with no DTRs" width="497" height="495">
</div>
</div>
<div class="paragraph">
<p>Same diagram with a little more detail on IRS side:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="architecture-constraints/discovery-DTR--multiple-EDCs-with-no-DTRs--detailed.svg" alt="discovery DTR  multiple EDCs with no DTRs  detailed" width="861" height="824">
</div>
</div>
</div>
<div class="sect5">
<h6 id="_special_scenario_same_dt_in_multiple_dtrs">Special Scenario: Same DT in multiple DTRs</h6>
<div class="paragraph">
<p>IRS will use all registries to query for the globalAssetId and takes the first result which is returned.
If no DT could be found in any of the DTRs, IRS will create a tombstone.</p>
</div>
</div>
<div class="sect5">
<h6 id="_special_scenario_multiple_dts_with_the_same_globalassetid_in_one_dtr">Special Scenario: Multiple DTs (with the same globalAssetId) in one DTR</h6>
<div class="paragraph">
<p>IRS uses the <code>/query</code> endpoint of the DTR to get the DT id based on the globalAssetId.
If more than one id is present for a globalAssetId, IRS will use the first of the list.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="architecture-constraints/discovery-DTR--multiple-DTs-with-the-same-globalAssedId-in-one-DTR.svg" alt="discovery DTR  multiple DTs with the same globalAssedId in one DTR" width="225" height="191">
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_edc">EDC</h5>
<div class="paragraph">
<p>EndpointDataReferenceStorage is in-memory local storage that holds records (EndpointDataReferences) by either assetId or contractAgreementId.</p>
</div>
<div class="paragraph">
<p>When EDC gets EndpointDataReference describing endpoint serving data it uses EndpointDataReferenceStorage and query it by assetId.
This allows reuse of already existing EndpointDataReference if it is present, valid, and it&#8217;s token is not expired, rather than starting whole new contract negotiation process.</p>
</div>
<div class="paragraph">
<p>In case token is expired the process is also shortened.
We don&#8217;t have to start new contract negotiation process, since we can obtain required contractAgreementId from present authCode.
This improves request processing time.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="architecture-constraints/discovery-process-edc.svg" alt="discovery process edc" width="1253" height="535">
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_development_concepts">Development concepts</h3>
<div class="sect3">
<h4 id="_build_test_deploy">Build, test, deploy</h4>
<div class="paragraph">
<p>The IRS is built using <a href="https://maven.apache.org/">Apache Maven</a> and utilizes all the standard concepts of it.
Test execution is part of the build process and a minimum test coverage of 80% is enforced.</p>
</div>
<div class="paragraph">
<p>The project setup contains a multi-module Maven build.
Commonly used classes (like the IRS data model) should be extracted
into a separate submodule and reused across the project.
However, this is not a "one-size-fits-all" solution.
New submodules should be created with care and require a review by the team.</p>
</div>
<div class="paragraph">
<p>The Maven build alone only leads up to the JAR artifact of the IRS.
To create Docker images, the Docker build feature is used.
This copies all resources into a builder image,
builds the software and creates a final Docker image at the end that can then be deployed.</p>
</div>
<div class="paragraph">
<p>Although the Docker image can be deployed in various ways, the standard solution are the provided Helm charts,
which describe the required components as well.</p>
</div>
</div>
<div class="sect3">
<h4 id="_code_generation">Code generation</h4>
<div class="paragraph">
<p>There are two methods of code generation in the IRS:</p>
</div>
<div class="sect4">
<h5 id="_lombok">Lombok</h5>
<div class="paragraph">
<p>The <a href="https://projectlombok.org/">Lombok</a> library is heavily used to generate boilerplate code
(like Constructors, Getters, Setters, Builders&#8230;&#8203;).
This way, code can be written faster and this boilerplate code is excluded from test coverage,
which keeps the test base lean.</p>
</div>
</div>
<div class="sect4">
<h5 id="_swagger_openapi">Swagger / OpenAPI</h5>
<div class="paragraph">
<p>The API uses <a href="https://www.openapis.org/">OpenAPI</a> annotations to describe the endpoints with all necessary information.
The annotations are then used to automatically generate the OpenAPI specification file,
which can be viewed in the Swagger UI that is deployed with the application.</p>
</div>
<div class="paragraph">
<p>The generated OpenAPI specification file is automatically compared to a fixed,
stored version of it to avoid unwanted changes of the API (see <code>IrsApplicationTests.generatedOpenApiMatchesContract</code>).</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_migration">Migration</h4>
<div class="paragraph">
<p>There currently is no data migration mechanism for the IRS.
In case the model of the persisted data (Jobs) changes, data is dropped and Jobs will need to be recreated.</p>
</div>
</div>
<div class="sect3">
<h4 id="_configurability">Configurability</h4>
<div class="paragraph">
<p>The IRS utilizes the configuration mechanism provided by <a href="https://spring.io/projects/spring-boot">Spring Boot.</a>
Configuration properties can be defined in the file <code>src/main/resources/application.yml</code></p>
</div>
<div class="paragraph">
<p>For local testing purposes, there is an additional configuration file called <code>application-local.yml</code>.
Values can be overridden there to support the local dev environment.</p>
</div>
<div class="paragraph">
<p>Other profiles should be avoided.
Instead, the configuration can be overwritten using the Spring Boot externalized configuration mechanism.
The operator must have total control over the configuration of the IRS.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_operational_concepts">Operational concepts</h3>
<div class="sect3">
<h4 id="_administration">Administration</h4>
<div class="sect4">
<h5 id="_configuration">Configuration</h5>
<div class="paragraph">
<p>The IRS can be configured using two mechanisms:</p>
</div>
<div class="sect5">
<h6 id="_application_yml">application.yml</h6>
<div class="paragraph">
<p>If you build the IRS yourself, you can modify the application.yml config that is shipped with the IRS.
This file contains all possible config entries for the application.
Once the Docker image has been built, these values can only be overwritten using the
Spring Boot externalized configuration mechanism,
e.g. by mounting a config file in the right path or using environment variables.</p>
</div>
</div>
<div class="sect5">
<h6 id="_helm_chart">Helm Chart</h6>
<div class="paragraph">
<p>The most relevant config properties are exposed as environment variables and must be set
in the <a href="https://helm.sh/">Helm</a> chart so the application can run at all.
Check the IRS Helm chart in Git for all available variables.</p>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_disaster_recovery">Disaster-Recovery</h4>
<div class="sect4">
<h5 id="_ephemeral_components">Ephemeral components</h5>
<div class="paragraph">
<p>All components in the IRS deployment not listed in the persistent components section below are considered ephemeral
and are easily replaced in a disaster scenario.
All deployment components are described using Helm charts,
which can be used to restore the deployment with the Docker images.
Should the Docker images go missing, they can be restored by executing the build pipelines
for the corresponding version tag of the component.</p>
</div>
</div>
<div class="sect4">
<h5 id="_persistent_components">Persistent components</h5>
<div class="paragraph">
<p>These components utilize data persistence, which needs to be backed up separately by the operator.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Minio persistent volume</strong>: Contains the stored Job information. In case of data loss, Jobs can be started again to retrieve the data from the network.</p>
</li>
<li>
<p><strong>Prometheus persistent volume</strong>: Contains the monitoring data of the IRS. In case of data loss, no analysis can be done for past timeframes.</p>
</li>
<li>
<p><strong>Vault secrets</strong>: In case of data loss, the credentials stored in the Vault need to be recreated manually. See the deployment view for an overview.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_scaling">Scaling</h4>
<div class="paragraph">
<p>If the number of consumers raises, the IRS can be scaled up by using more resources for the Deployment Pod.
Those resources can be used to utilize more parallel threads to handle Job execution.</p>
</div>
</div>
<div class="sect3">
<h4 id="_clustering">Clustering</h4>
<div class="paragraph">
<p>The IRS can run in clustered mode, as each running job is only present in one pod at a time.
Note: as soon as a resume feature is implemented, this needs to be addressed here.</p>
</div>
</div>
<div class="sect3">
<h4 id="_logging">Logging</h4>
<div class="paragraph">
<p>Logs are being written directly to stdout and are picked up by the cluster management.</p>
</div>
</div>
<div class="sect3">
<h4 id="_monitoring">Monitoring</h4>
<div class="paragraph">
<p>The application can be monitored using <a href="https://prometheus.io/">Prometheus</a> and <a href="https://grafana.com/">Grafana</a>.
Both systems are defined in the Helm charts with a default setup.
A number of Grafana dashboards are deployed automatically, to display data about:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Pod / JVM resources</p>
</li>
<li>
<p>API metrics</p>
</li>
<li>
<p>Functional information about IRS Jobs</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_quality_requirements">Quality requirements</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The quality scenarios in this section depict the fundamental quality goals as well as other required quality properties. They allow the evaluation of decision alternatives.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Quality attribute</strong>: A characteristic of software, or a generic term applying to quality factors, quality subfactors, or metric values.</p>
</li>
<li>
<p><strong>Quality factor</strong>: A management-oriented attribute of software that contributes to its quality.</p>
</li>
<li>
<p><strong>Quality subfactor</strong>: A decomposition of a quality factor or quality subfactor to its technical components.</p>
</li>
<li>
<p><strong>Metric value</strong>: A metric output or an element that is from the range of a metric.</p>
</li>
<li>
<p><strong>Software quality metric</strong>: A function whose inputs are software data and whose output is a single numerical value that can be interpreted as the degree to which software possesses a given attribute that affects its quality.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Source</strong>: IEEE standard 1061 "Standard for a Software Quality Metrics Methodology"</p>
</div>
<div class="sect2">
<h3 id="_quality_scenarios">Quality Scenarios</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">ID</th>
<th class="tableblock halign-left valign-top">Scenario</th>
<th class="tableblock halign-left valign-top">Implementation</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DS01</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Any data consumption via the IRS checks if data offers are done according to "Use Case Rahmenbedingungen".</p>
<p class="tableblock">IRS provides a configuration capability for the "Rahmenbedingungs ID" to be used in a given scenario / deployment.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">"PolicyCheckerService is used to check defined Usage Policies according to the "Rahmenbedingungsbedingungen" which is obligatory for data consumption.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_glossary">Glossary</h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 30%;">
<col style="width: 10%;">
<col style="width: 60%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Term</th>
<th class="tableblock halign-left valign-top">Abrv.</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Asset Administration Shell</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AAS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">see "Digital Twin"</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Aspect Servers (Submodel Endpoints)</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Companies participating in the interorganizational data exchange provides their data over aspect servers. The so called "submodel-descriptors" in the AAS shells are pointing to these AspectServers which provide the data-assets of the participating these companies in Catena-X.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bill of Materials</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">BoM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A Bill of Materials is a comprehensive list of materials, components, sub-assemblies, and the quantities of each needed to manufacture or build a product. It serves as a structured document that provides information about the raw materials, parts, and components required for the production process.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Business Partner Number</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">BPN</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A BPN is the unique identifier of a partner within Catena-X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Business Partner Number Legal Enitity</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">BPNL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A legal entity is a juridical person or group which has legal rights and duties related to contracts, agreements, obligations etc. The term applies to any kind of organization which was founded under the particular set of law governing the country.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Business Partner Number Site</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">BPNS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A site is a delimited geographical area where a legal entity does business (geographical address with geo coordinates). Providing a primary physical address for a site is mandatory. It is possible to specify further physical addresses for this location. P.O. box details are only possible in addition to the physical address. A site has a 1:n relation to addresses, means at least 1 address is necessary and multiple addresses are possible.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Business Partner Number Address</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">BPNA</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An address is a collection of information to describe a position, e.g. using street names or P.O. boxes as references. In addition an address consists of several postal attributes, e.g. Country, Region (State), District, Postal Code, City.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">CatalogItem</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A "CatalogItem" from EDC is a synonym for "Contract Offer".</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Contract Offer</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A "Contract Offer" is a synonym for "CatalogItem" from EDC.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Data Space</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Data Spaces are the key concept for a large-scale, cross-border data economy. This is also the vision of the Gaia-X initiative for a data infrastructure in Europe. The International Data Space Association (IDSA) contributes significantly to this with the architectural model, interfaces, and standards.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Digital Twin</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The Digital Twin is the key technology of Industry 4.0 and connects the physical world with the digital world and acts as an enabler of the Catena-X network. It is based on a standardized programming interface of the Industrial <a href="https://industrialdigitaltwin.org/">Digital Twin Association (IDTA)</a> and its Asset Administration Shell.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Digital Twin Registry</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DTR</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The Digital Twin Registry is a registry which lists all digital twins and references their aspects including information about the underlying asset, asset manufacturer, and access options (e.g. aspect endpoints).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Eclipse Dataspace Connector</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">EDC</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The Eclipse Data Space Connector (EDC) is a standard and policy-compliant connector that can be used within the scope of Catena-X, but also more generally as a connector for Data Spaces. It is split up into Control-Plane and Data-Plane, whereas the Control-Plane functions as administration layer and has responsibility of resource management, contract negotiation and administer data transfer. The Data-Plane does the heavy lifting of transferring and receiving data streams. For more information see:
<a href="https://github.com/eclipse-edc/Connector">EDC Connector</a> , <a href="https://github.com/eclipse-tractusx/tractusx-edc">Tractus-X EDC (Eclipse Dataspace Connector)</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Edge</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">see Traversal Aspect</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Item Relationship Service</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IRS</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Item Graph</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The result returned via the IRS. This corresponds to a tree structure in which each node represents a part of a virtual asset.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Managed Identity Wallet</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MIW</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The Managed Identity Wallets (MIW) service implements the Self-Sovereign-Identity (SSI) readiness by providing a wallet hosting platform including a decentralized identifier (DID) resolver, service endpoints and the company wallets itself.
For more information see:
<a href="https://github.com/eclipse-tractusx/managed-identity-wallet">eclipse-tractusx/managed-identity-wallet</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Multi Tier Parts Data Chain</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MTPDC</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Formerly known Service Name: Multi Tier Parts Data Chain</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Policy Store</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The Policy Store is an IRS component which provides an interface for getting, adding and deleting accepted IRS EDC policies. These policies will be used to validate EDC contract offers. EDC contract offers must include permissions that are equal to permission defined by an admin user in order to be allowed to use in IRS use cases.
For more information see:
<a href="https://github.com/eclipse-tractusx/ssi-docu/blob/main/docs/architecture/cx-3-2/edc/policy.definitions.md#0-introduction">Policy specification for Catena-X verifiable credentials</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Parts Relationship Service</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PRS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Formerly known Service Name: Parts Relationship Service</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Self-Sovereign Identity</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SSI</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">For more information see: <a href="https://github.com/eclipse-tractusx/ssi-docu/tree/main/docs/architecture/cx-3-2">ssi-docu</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Shell</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">see "Asset Administration Shell"</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Traversal Aspect</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">aka Edge: Aspect which the IRS uses for traversal through the data chain. Identified by a parent-child or a child-parent relationship.</p>
<p class="tableblock">Samples: <a href="https://github.com/eclipse-tractusx/sldt-semantic-models/tree/main/io.catenax.single_level_bom_as_planned">SingleLevelBomAsPlanned</a>, <a href="https://github.com/eclipse-tractusx/sldt-semantic-models/tree/main/io.catenax.single_level_bom_as_built">SingleLevelBomAsBuilt</a> and <a href="https://github.com/eclipse-tractusx/sldt-semantic-models/tree/main/io.catenax.single_level_usage_as_built">SingleLevelUsageAsBuilt</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Verifiable Credential</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">VC</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">For more information see: <a href="https://github.com/eclipse-tractusx/ssi-docu/tree/main/docs/architecture/cx-3-2/3.%20Verifiable%20Credentials">Verifiable Credentials</a></p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="_notice">NOTICE</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This work is licensed under the <a href="https://www.apache.org/licenses/LICENSE-2.0">Apache-2.0</a>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>SPDX-License-Identifier: Apache-2.0</p>
</li>
<li>
<p>SPDX-FileCopyrightText: 2021, 2023 Bayerische Motoren Werke Aktiengesellschaft (BMW AG)</p>
</li>
<li>
<p>SPDX-FileCopyrightText: 2022, 2023 BOSCH AG</p>
</li>
<li>
<p>SPDX-FileCopyrightText: 2021, 2022 ZF Friedrichshafen AG</p>
</li>
<li>
<p>SPDX-FileCopyrightText: 2022  ISTOS GmbH</p>
</li>
<li>
<p>SPDX-FileCopyrightText: 2021, 2023 Contributors to the Eclipse Foundation</p>
</li>
<li>
<p>Source URL: <a href="https://github.com/eclipse-tractusx/item-relationship-service" class="bare">https://github.com/eclipse-tractusx/item-relationship-service</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2024-07-12 13:43:58 UTC
</div>
</div>
</body>
</html>