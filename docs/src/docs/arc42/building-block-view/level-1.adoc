= Level 1

== Component diagram

[plantuml, target=level-1, format=svg]
....
include::../../../uml-diagrams/building-block-view/building-block-view.puml[]
....

== Component description

|===
|Components |Description

|*IRS*
|The IRS creates a digital representation of a product (digital twin) and the relationships between the items that make up the product in a hierarchical structure.

The result is an item graph in which each node represents a digital item of the product - this graph is called "Item Graph".

|*IRS API*
|The *IRS API* is the interface through which the data consumer communicates.

|*IrsController*
|The *IrsController* provides a REST interface for retrieving IRS processed data and job details of the current Item Graph retrieval process.

|*IrsItemGraphQueryService*
|The *IrsItemGraphQueryService* implements the REST interface of the IrsController.

|*JobOrchestrator*
|The *JobOrchestrator* is a component that manages (start, end, cancel, resume) the jobs that execute the item graph retrieval process.

|*RecursiveJobHandler*
|The *RecursiveJobHandler* handles job execution recursively until a given abort criterion is reached or the complete item graph is built.

|*TransferProcessManager*
a| The TransferProcessManager handles outgoing requests to the various data services.
A job is processed in the following order:

1. Initiation of the job and preparation of the stream of *DataRequests*
2. *RecursiveJobHandler* requesting the AAS via the Digital Twin registry.
3. Analyzing the structure of the AAS response by collecting the traversal aspect.
4. Requesting submodel data for given items of next level.
5. Recursive iteration over steps 2-4 until an abort criterion is reached.
6. Assembles the complete item graph.

|*BlobStore*
|The BlobStore is the database that stores the relationships and tombstones for a requested item.

|*JobStore*
|The JobStore is the database that stores the jobs with information about the requested item.

|*Digital Twin Client*
|The Digital Twin Client is the interface to the Digital Twin Registry. It provides an interface for the Asset Administration Shells.

|*Decentralized Digital Twin Client*
|In a decentralized network, the Digital Twin Client connects to the EDC, which then proxies the requests to the Digital Twin Registry on the provider side.

|*EDC Client*
|The EDC Client is used to communicate with the EDC network, negotiate contracts and retrieve submodel data.

|*EssController*
|The *EssController* provides a REST interface to perform BPN investigations of supply chain.

|*PolicyStoreController*
|The *PolicyStoreController* provides a REST interface to retrieve, add and delete accepted IRS EDC policies. These policies are used to validate EDC contract offers.

|===